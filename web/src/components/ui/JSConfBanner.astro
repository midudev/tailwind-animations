---
// Banner flotante para anunciar la JSConf España 2026
---

<aside
  id="jsconf-banner"
  class="fixed bottom-4 right-4 z-50 hidden animate-fade-in-up"
>
  <a
    href="https://jsconf.es/"
    target="_blank"
    rel="noopener noreferrer"
    class="group flex items-center gap-3 rounded-xl border border-[#f7df1e] bg-white px-4 py-3 shadow-xl ring-1 ring-slate-200/50 transition-all hover:scale-[1.02] hover:shadow-2xl dark:bg-slate-900 dark:ring-slate-700/50"
  >
    <!-- Logo JSConf -->
    <svg
      viewBox="0 0 750 750"
      class="h-12 w-auto transition-transform group-hover:scale-105 sm:h-14"
    >
      <defs>
        <clipPath id="jsconf-clip">
          <path d="M0 0h750v182.406H0Zm0 0"></path>
        </clipPath>
      </defs>
      <path fill="#f7df1e" d="M-75-75h900v900H-75z"></path>
      <path
        fill="#ab181f"
        d="M503.809 585.941c15.109 24.664 34.761 42.797 69.523 42.797 29.203 0 47.86-14.593 47.86-34.761 0-24.168-19.169-32.727-51.31-46.786l-17.62-7.558c-50.856-21.668-84.645-48.813-84.645-106.192 0-52.859 40.278-93.097 103.215-93.097 44.813 0 77.023 15.597 100.238 56.43l-54.879 35.238c-12.086-21.668-25.12-30.203-45.359-30.203-20.64 0-33.727 13.097-33.727 30.203 0 21.144 13.098 29.703 43.336 42.797l17.618 7.546c59.882 25.68 93.691 51.86 93.691 110.715 0 63.453-49.844 98.215-116.785 98.215-65.453 0-107.738-31.191-128.43-72.07Zm-248.965 6.106c11.074 19.644 21.144 36.25 45.36 36.25 23.151 0 37.76-9.059 37.76-44.285V344.367h70.477v240.598c0 72.976-42.785 106.191-105.238 106.191-56.43 0-89.11-29.203-105.726-64.375Zm0 0"
      ></path>
      <g clip-path="url(#jsconf-clip)">
        <path fill="#ab181f" d="M0-97.5h775.207v279.906H0Zm0 0"></path>
      </g>
      <path
        fill="#ab181f"
        d="M414.743 266.631q-18.3.001-40.22 11.563-21.923 11.564-40.562 30.203v-52.11q34.53-37.623 84.235-37.624 23.467 0 42.968 4.828 19.5 4.828 50.22 17.953c15.187 6.437 28.413 11.215 39.687 14.328q16.921 4.658 33.14 4.656 18.639.002 40.735-11.047 22.089-11.044 40.734-30.718v51.765q-35.221 37.97-84.219 37.97-24.86 0-46.61-5.688-21.737-5.7-46.593-16.75-25.894-11.045-41.422-15.188-15.534-4.138-32.093-4.14Zm0 0"
      ></path>
    </svg>

    <!-- Texto -->
    <div class="flex flex-col">
      <span class="text-sm font-bold text-slate-900 dark:text-white"
        >JSConf España 2026</span
      >
      <span class="text-xs text-slate-500 dark:text-slate-400"
        >14 Mar · Madrid · La Nave</span
      >
      <span
        class="mt-1 inline-flex items-center gap-1 rounded-full bg-[#f7df1e] px-2 py-0.5 text-xs font-semibold text-slate-900"
      >
        Consigue tu entrada
        <svg
          xmlns="http://www.w3.org/2000/svg"
          class="h-3 w-3 transition-transform group-hover:translate-x-1"
          fill="none"
          viewBox="0 0 24 24"
          stroke="currentColor"
          stroke-width="2.5"
        >
          <path
            stroke-linecap="round"
            stroke-linejoin="round"
            d="M13 7l5 5m0 0l-5 5m5-5H6"></path>
        </svg>
      </span>
    </div>
  </a>

  <!-- Botón cerrar -->
  <button
    id="jsconf-banner-close"
    type="button"
    class="absolute -top-2 -right-2 flex h-6 w-6 items-center justify-center rounded-full border border-slate-200 bg-white text-slate-400 shadow-md transition-all hover:bg-slate-100 hover:text-slate-600 dark:border-slate-700 dark:bg-slate-800 dark:text-slate-400 dark:hover:bg-slate-700 dark:hover:text-slate-200"
    aria-label="Cerrar banner"
  >
    <svg
      xmlns="http://www.w3.org/2000/svg"
      class="h-3 w-3"
      fill="none"
      viewBox="0 0 24 24"
      stroke="currentColor"
      stroke-width="2.5"
    >
      <path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12"
      ></path>
    </svg>
  </button>
</aside>

<script>
  const COOKIE_NAME = 'jsconf-banner-closed'
  const COOKIE_DAYS = 3

  function getCookie(name: string): string | null {
    const value = `; ${document.cookie}`
    const parts = value.split(`; ${name}=`)
    if (parts.length === 2) return parts.pop()?.split(';').shift() || null
    return null
  }

  function setCookie(name: string, value: string, days: number): void {
    const date = new Date()
    date.setTime(date.getTime() + days * 24 * 60 * 60 * 1000)
    const expires = `expires=${date.toUTCString()}`
    document.cookie = `${name}=${value};${expires};path=/`
  }

  function initBanner(): void {
    const $banner = document.getElementById('jsconf-banner')
    const $closeBtn = document.getElementById('jsconf-banner-close')

    if (!$banner || !$closeBtn) return

    // Verificar si el banner ya fue cerrado
    if (getCookie(COOKIE_NAME)) {
      $banner.remove()
      return
    }

    // Mostrar el banner
    $banner.classList.remove('hidden')

    // Manejar el cierre
    $closeBtn.addEventListener('click', (e) => {
      e.preventDefault()
      e.stopPropagation()
      
      // Guardar cookie por 3 días
      setCookie(COOKIE_NAME, 'true', COOKIE_DAYS)
      
      // Animar y ocultar
      $banner.classList.add('animate-fade-out')
      $banner.addEventListener('animationend', () => {
        $banner.remove()
      }, { once: true })
    })
  }

  // Inicializar cuando el DOM esté listo
  if (document.readyState === 'loading') {
    document.addEventListener('DOMContentLoaded', initBanner)
  } else {
    initBanner()
  }
</script>
