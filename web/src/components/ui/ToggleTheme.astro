---
import SunIcon from '../icons/sun.astro'
import MoonIcon from '../icons/moon.astro'
---

<button
  id='theme-toggle'
  class='inline-flex cursor-pointer text-slate-400 transition-colors hover:text-slate-600 dark:hover:text-slate-200'
  aria-label='Toggle theme'
>
  <SunIcon id='sun-icon' class='hidden size-7 dark:block' />
  <MoonIcon id='moon-icon' class='block size-7 dark:hidden' />
</button>

<script>
  const handleToggleClick = () => {
    const element = document.documentElement
    element.classList.toggle('dark')

    const isDark = element.classList.contains('dark')
    localStorage.setItem('theme', isDark ? 'dark' : 'light')
  }

  const $toggle = document.getElementById('theme-toggle')

  if ($toggle) {
    $toggle.addEventListener('click', handleToggleClick)
  }
</script>
