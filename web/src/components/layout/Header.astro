---
import Logo from '@components/ui/Logo.astro'
import Github from '@components/icons/github.astro'
import ToggleTheme from '@components/ui/ToggleTheme.astro'
import Menu from '@components/icons/menu.astro'
import Enlace from '@components/ui/Enlace.astro'
---

<!-- Todo el header completo el componente y sus configuraciones -->

<style>
  .header-scroll {
    --header-opacity: 0;
    background: rgb(255 255 255 / calc(var(--header-opacity) * 0.8));
    border-color: rgb(226 232 240 / var(--header-opacity));
    backdrop-filter: blur(calc(var(--header-opacity) * 4px));
  }

  :global(.dark) .header-scroll {
    background: rgb(15 23 42 / calc(var(--header-opacity) * 0.8));
    border-color: rgb(51 65 85 / var(--header-opacity));
  }

  .logo-scroll {
    --logo-opacity: 0;
    opacity: var(--logo-opacity);
    transform: translateY(calc((1 - var(--logo-opacity)) * 20px));
  }
</style>

<script>
  const btn = document.getElementById('menu-btn')
  const menu = document.getElementById('menu')

  if (btn && menu) {
    btn.addEventListener('click', () => {
      const menuOpen = menu.classList.toggle('hidden')
      btn.setAttribute('aria-expanded', String(!menuOpen))
    })
  }

  // Logo and header scroll visibility
  const logoContainer = document.getElementById('logo-container')
  const header = document.getElementById('header')

  const handleScroll = () => {
    const scrollY = window.scrollY

    // Progressive opacity based on scroll (0 to 100px)
    const progress = Math.min(scrollY / 100, 1)
    header?.style.setProperty('--header-opacity', String(progress))
    logoContainer?.style.setProperty('--logo-opacity', String(progress))
  }

  window.addEventListener('scroll', handleScroll)
</script>

<header
  id='header'
  class='fixed z-20 w-screen border-b px-3 py-5 header-scroll'
>
  <div class='mx-auto grid w-full max-w-6xl grid-cols-2 grid-cols-[auto_auto]'>
    <!-- Title of Web -->
    <div
      id='logo-container'
      class='flex items-center gap-1 sm:gap-2 logo-scroll'
    >
      <Logo
        class='aspect-square size-7 shrink-0 sm:size-9'
        iconClass='size-4 sm:size-6 animate-float-subtle'
      />
      <span
        class='text-2xl font-bold tracking-tight text-slate-900 sm:text-3xl dark:text-white'
      >
        Tailwind <span class='text-blue-500'>Animations</span>
      </span>
    </div>

    <button
      id='menu-btn'
      aria-label='Abrir menÃº'
      aria-expanded='false'
      class='flex justify-end text-2xl lg:hidden'
    >
      <Menu class='size-7 self-end sm:size-8' />
    </button>

    <div
      id='menu'
      class='col-span-2 hidden h-fit gap-5 lg:col-span-1 lg:grid lg:grid-cols-[auto_auto]'
    >
      <!-- main navigation -->
      <nav
        class='my-3 flex flex-col gap-5 max-lg:text-center lg:flex-row lg:items-center lg:gap-6'
      >
        <div
          class='h-[2px] bg-gradient-to-r from-transparent via-slate-300 to-transparent dark:via-slate-800'
        >
        </div>
        <Enlace href='#animation-collection'>Animation Collection</Enlace>
        <Enlace href='#scroll-animations'>Scroll Animations</Enlace>
        <Enlace href='#scroll-view-timelines'>Scroll View Timelines</Enlace>
      </nav>

      <!-- Color Theme / GitHub -->
      <div
        id='menu-icons'
        class='mt-3 flex flex-row justify-center gap-4 lg:flex'
      >
        <ToggleTheme />

        <a
          aria-label='View website repository on GitHub'
          href='https://github.com/midudev/tailwind-animations'
          target='_blank'
          rel='noopener noreferrer'
          class='text-slate-400 transition-colors hover:text-slate-600 dark:hover:text-slate-200'
        >
          <Github class='size-7' />
        </a>
      </div>
    </div>
  </div>
</header>
